<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>
  Coding | Arunmozhi
</title>

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">

<meta name="generator" content="Hugo 0.154.5">


<link rel="canonical" href="http://localhost:1313/categories/coding/" >
  <link href="http://localhost:1313/categories/coding/index.xml" rel="alternate" type="application/rss+xml" title="Arunmozhi" >
  <link href="http://localhost:1313/categories/coding/index.xml" rel="feed" type="application/rss+xml" title="Arunmozhi" >




<link href="/css/style.min.66302fa6c122ab7804faa4bd6465554ac4d746c25294af622826d0445b79ab94.css" rel="stylesheet">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="stylesheet" href="/css/custom.css">



</head>

<body>

    <div class="flexWrapper">
        <header class="headerWrapper">
    <div class="header">
        <div>
            <a class="terminal" href="/">
                <span>Arunmozhi@arunmozhi.in ~ $</span>
            </a>
        </div>
        <input class="side-menu" type="checkbox" id="side-menu">
        <label class="hamb" for="side-menu"><span class="hamb-line"></span></label>
        <nav class="headerLinks">
            <ul>
                
                <li>
                    <a href="http://localhost:1313/posts/" title="" >
                        ~/blog</a>
                </li>
                
                <li>
                    <a href="http://localhost:1313/about/" title="" >
                        ~/about</a>
                </li>
                
            </ul>
        </nav>
    </div>
</header>


        <div class="content">
            <main class="main">
                
<div>
  <div class="listHeader">
    <h1>Coding</h1>
  </div>

  

  
  

  <div role="list">
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2025/10/23/optimizing-a-python-script-and-some-surprises/">
          <div class="postHeader">
            <span class="postTitle">Optimizing a Python Script - Some Surprises</span>
            
            
            <time class="postDate" datetime="2025-10-23">2025-10-23</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 5 minutes
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>I have recently started using Claude Code and have found it very useful for experimentation and investigation type tasks.
Today I had to work on a processing a large text file with some patterns to be replaced in 2 stages</p>
<ol>
<li>at an individual line level</li>
<li>at a passage level</li>
</ol>
<p>I wrote the initial script using Python Regexes. Each of the stage has multiple regexes. And being the
simple minded programmer that I am, I simply used a for loop to use each regex and do a substiturion.
This was fine for a 20MB input file that it was written for. Then I got a 12 GB file to process.
After running for 2 hours, it was at about 5 out of the 35 million lines.</p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2024/09/06/replacing-pyenv-nvm-direnv-with-mise/">
          <div class="postHeader">
            <span class="postTitle">Replacing pyenv, nvm, direnv with Mise</span>
            
            
            <time class="postDate" datetime="2024-09-06">2024-09-06</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 3 minutes
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>I recently got a new laptop with the Ultra 7 Intel processor. My older one is an i5 8th generation. So, I as very surprised when a new terminal was usable after a visible delay. It was almost as slow as the old laptop.</p>
<h3 id="maybe-i-bought-a-crappy-intel-processor">Maybe I bought a crappy Intel Processor?</h3>
<p>Now, Intel CPUs aren&rsquo;t being praised for their performance. I know I don&rsquo;t have an AMD Ryzen 9. Surely being <strong>54th fastest</strong> has to mean better than <strong>394th fastest</strong>?</p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2023/12/26/none/">
          <div class="postHeader">
            <span class="postTitle">Writing testable code with Polars and Pytest</span>
            
            
            <time class="postDate" datetime="2023-12-26">2023-12-26</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 1 minute
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>The Python Polars 
<a href="https://pola-rs.github.io/polars/py-polars/html/reference/testing.html" target="_blank" rel="noopener">documenation on testing</a>
 provides only a couple of pointers and it offloads the core part to the 
<a href="https://hypothesis.readthedocs.io/" target="_blank" rel="noopener">Hypothesis</a>
 library. Here I want to documnent a more simpler approach for deterministic tests using just Pytest and <code>pytest.mark.parametrize</code>.</p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2022/02/03/clean-python-compiled-files-pyc-using-py3clean/">
          <div class="postHeader">
            <span class="postTitle">Clean Python compiled files (.pyc) using py3clean</span>
            
            
            <time class="postDate" datetime="2022-02-03">2022-02-03</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 1 minute
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>Recently ran into some issues with Python compiled files <code>__pycache__</code> and <code>*.pyc</code> files not getting deleted when doing <code>git checkout</code>. The files have been created when I mounted the folder as a volume in a docker container and had different rights than the current user. So, I needed to use <code>sudo</code> to remove them recursively in the project.</p>
<p>That&rsquo;s when I learnt of this cool new tool called <code>py3clean</code>. Simply run <code>py3clean &lt;folder&gt;</code> and it will remove all the Python compiled files recursively.</p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2021/06/20/learning-rust-day-1/">
          <div class="postHeader">
            <span class="postTitle">Learning Rust - Day 1</span>
            
            
            <time class="postDate" datetime="2021-06-20">2021-06-20</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 1 minute
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>Dev notes from learning Rust.</p>
<p><em>Official Website:</em> 
<a href="https://www.rust-lang.org" target="_blank" rel="noopener">https://www.rust-lang.org</a>
</p>
<ul>
<li>Installed the tool from the official website 
<a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noopener">https://www.rust-lang.org/tools/install</a>
</li>
<li>Started learning from the official Rust Book - 
<a href="https://doc.rust-lang.org/book/" target="_blank" rel="noopener">https://doc.rust-lang.org/book/</a>
</li>
<li>Completed the Chapter 1 and learnt about the 2 methods of compilation - using the direct <code>rustc</code> compiler and the <code>cargo</code> package manager</li>
</ul>
<h2 id="notes">Notes</h2>
<ul>
<li>Rust is a compiled language - different from my daily drivers Python and JavaScript both interpreted languages.</li>
<li>Compiled means re-learning the difference between passing by reference and passing by value</li>
<li>Rust has mutability at the core of data management - so being conscious about immutable and mutable data</li>
<li>Errors are handled as a part of the <code>Result</code> of functions. Doesn&rsquo;t need an explicit <code>try...except</code> (at least at this point)</li>
<li>Packages are called <code>crates</code> and there are binary crates &amp; library crates</li>
<li>
<a href="https://crates.io/" target="_blank" rel="noopener">https://crates.io/</a>
 is the package registry</li>
<li><code>Cargo.lock</code> file acts as the record of dependencies for Reproducible builds</li>
<li><code>cargo update</code> updates the packages to the most recent bugfix version</li>
<li>there is something called Traits which provide access to functions of a crate.</li>
</ul>
<p><img src="/img/wp-content/uploads/2021/08/guessing_game_1.png?w=937" alt=""></p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2020/12/24/backup-all-the-files-in-a-directory-to-azure-cloud/">
          <div class="postHeader">
            <span class="postTitle">Backup all the files in a directory to Azure Cloud</span>
            
            
            <time class="postDate" datetime="2020-12-24">2020-12-24</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 1 minute
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>I had to copy all the files from the home directory into a Azure Blob container today. All the regular folders without any of the dot files and dot folders.</p>
<p>Azure CLI provides 
<a href="https://docs.microsoft.com/en-us/cli/azure/storage/blob?view=azure-cli-latest#az_storage_blob_upload_batch" target="_blank" rel="noopener">batch upload functionality</a>
 to upload folders. But there are two issues I faced:</p>
<ol>
<li>I needed to copy all the folders - and I didn&rsquo;t want to run the command for each folder.</li>
<li>I wanted to preserve the folder structure in the container as well.</li>
</ol>
<p>After some trial and error I settled on this one liner.</p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2020/08/18/strapi-optimizing-rest-api-responses-by-preventing-auto-population-of-relations/">
          <div class="postHeader">
            <span class="postTitle">Strapi - Optimizing REST API responses by preventing auto-population of relations</span>
            
            
            <time class="postDate" datetime="2020-08-18">2020-08-18</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 3 minutes
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>Strapi is an Open Source headless CMS based on NodeJS. It provides the backend admin tools to quickly create an API – both REST and GraphQL.</p>
<p>This is a mini series which outlines:</p>
<ol>
<li>
<a href="https://arunmozhi.in/2020/08/08/strapi-creating-an-api-without-a-single-line-of-code/" target="_blank" rel="noopener">Setting up Strapi and creating an API</a>
</li>
<li>
<a href="https://arunmozhi.in/2020/08/11/strapi-adding-isowner-policy-to-the-api/" target="_blank" rel="noopener">Adding ownership control to the API endpoints</a>
</li>
<li>Optimising REST API responses – (you are here)</li>
</ol>
<h2 id="so-far-">So far &hellip;</h2>
<p>We have created a REST API for an expense management application with category support. We have JWT token based auth which came with Strapi to authenticate users. We have implemented the <strong>IsOwner</strong> policy in the controllers to restrict data access.</p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2020/08/11/strapi-adding-isowner-policy-to-the-api/">
          <div class="postHeader">
            <span class="postTitle">Strapi - Adding IsOwner Policy to the API</span>
            
            
            <time class="postDate" datetime="2020-08-11">2020-08-11</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 7 minutes
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>Strapi is an Open Source headless CMS based on NodeJS. It provides the backend admin tools to quickly create an API – both REST and GraphQL.</p>
<p>This is a mini series which outlines:</p>
<ol>
<li>
<a href="https://arunmozhi.in/2020/08/08/strapi-creating-an-api-without-a-single-line-of-code/" target="_blank" rel="noopener">Setting up Strapi and creating an API</a>
</li>
<li>Adding ownership control to the API endpoints – (you are here)</li>
<li>Optimising REST API responses</li>
</ol>
<h2 id="so-far">So far&hellip;</h2>
<p>We have created models for the app and have an API setup which works with JWT Authentication without a single line of code. But we have an issue, any authenticated user can read every other user&rsquo;s data.</p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2020/08/08/strapi-creating-an-api-without-a-single-line-of-code/">
          <div class="postHeader">
            <span class="postTitle">Strapi - Creating an API without a single line of code</span>
            
            
            <time class="postDate" datetime="2020-08-08">2020-08-08</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 8 minutes
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>
<a href="https://strapi.io/" target="_blank" rel="noopener">Strapi</a>
 is an Open Source headless CMS based on NodeJS. It provides the backend admin tools to quickly create an API - both REST and GraphQL. I picked this up for a quick project in place of my regular Python frameworks like Flask or Django, because I can have an API up and running without writing a single line of code.</p>
<p>This is a mini series which outlines:</p>
<ol>
<li>Setting up Strapi and creating an API - (you are here)</li>
<li>
<a href="http://arunmozhi.in/2020/08/11/strapi-adding-isowner-policy-to-the-api/" target="_blank" rel="noopener">Adding ownership control to the API endpoints</a>
</li>
<li>Optimising REST API responses</li>
</ol>
<h2 id="why-this-series">Why this series?</h2>
<p>There is already wealth of blog posts on using Strapi for creating a variety of websites and apps. But most of them tend to focus on capabilities of vanilla Strapi. I want to focus on a couple of customisations that I made when using it to build a web application.</p>
        </div>
      </div>
    
      <div class="postListItem" role="listitem">
        <a class="postListLink" href="http://localhost:1313/2020/06/28/text-plain-mime-type-and-python/">
          <div class="postHeader">
            <span class="postTitle">text/plain MIME Type and Python</span>
            
            
            <time class="postDate" datetime="2020-06-28">2020-06-28</time>
          </div>

          
          
          
          
          
          <div class="readingTime">
            reading time: 3 minutes
          </div>
          
        </a>

        <div class="postExcerpt">
          <p>When you do <code>echo &quot;x&quot; &gt; my_file</code> and then check its MIME type using <code>file --mime-type my_file</code> it would say <code>text/plain</code>. But, when you do the same in Python by</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;my_file_2&#34;</span>, <span style="color:#e6db74">&#34;w&#34;</span>) <span style="color:#66d9ef">as</span> fp:
</span></span><span style="display:flex;"><span>fp<span style="color:#f92672">.</span>write(<span style="color:#e6db74">&#34;x&#34;</span>)
</span></span></code></pre></div><p>and then check the MIME type it would say <code>application/octet-stream</code>. What&rsquo;s the difference?</p>
<h3 id="for-the-impatient">For the impatient</h3>
<p><strong>echo</strong> adds a new line to file which tells the <strong>file</strong> utility it is a text file.</p>
<h3 id="for-the-curious">For the curious</h3>
<p>When I saw 
<a href="https://stackoverflow.com/questions/62617361/how-to-write-a-one-character-file-using-python-with-mime-type-text-plain" target="_blank" rel="noopener">this question on StackOverflow</a>
, I was really stumped due to the following reasons:</p>
        </div>
      </div>
    
  </div>

  <nav class="pagination" role="navigation" aria-label="Pagination"><span class="pagination-status">
    page 1 / 4
  </span><a class="pagination-next" href="/categories/coding/page/2/" rel="next">
    older posts »
  </a></nav>

</div>

            </main>
        </div>


        <footer class="footer">
    
        <span>
            © 2026 Arunmozhi, Built with
            <a href="https://gohugo.io" class="footerLink">Hugo</a> and
            <a href="https://github.com/LordMathis/hugo-theme-nightfall" class="footerLink">Nightfall</a> theme
        </span>
    
</footer>
    </div>

</body>

</html>
