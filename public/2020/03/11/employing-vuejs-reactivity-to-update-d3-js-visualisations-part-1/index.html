<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>
Employing VueJS reactivity to update D3.js Visualisations - Part 1 | Arunmozhi
</title>

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">

<meta name="generator" content="Hugo 0.154.5">


<link rel="canonical" href="http://localhost:1313/2020/03/11/employing-vuejs-reactivity-to-update-d3-js-visualisations-part-1/" >




<link href="/css/style.min.66302fa6c122ab7804faa4bd6465554ac4d746c25294af622826d0445b79ab94.css" rel="stylesheet">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="stylesheet" href="/css/custom.css">



</head>

<body>

    <div class="flexWrapper">
        <header class="headerWrapper">
    <div class="header">
        <div>
            <a class="terminal" href="/">
                <span>Arunmozhi@arunmozhi.in ~ $</span>
            </a>
        </div>
        <input class="side-menu" type="checkbox" id="side-menu">
        <label class="hamb" for="side-menu"><span class="hamb-line"></span></label>
        <nav class="headerLinks">
            <ul>
                
                <li>
                    <a href="http://localhost:1313/posts/" title="" >
                        ~/blog</a>
                </li>
                
                <li>
                    <a href="http://localhost:1313/about/" title="" >
                        ~/about</a>
                </li>
                
            </ul>
        </nav>
    </div>
</header>


        <div class="content">
            <main class="main">
                
<div class="postWrapper">
        <h1>Employing VueJS reactivity to update D3.js Visualisations - Part 1</h1>
        

    
    
    
    

    
    
    
    
    

    
    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    <section class="postMetadata">
        <dl>
            
                
<dt>tags</dt>
<dd><span></span>
    <a href="/tags/d3js/">#D3js</a><span></span>
    <a href="/tags/vue/">#Vue</a></dd>
            
            
            
                
<dt>categories</dt>
<dd><span></span>
    <a href="/categories/coding/">Coding</a></dd>
            
            
                <dt>published</dt>
                 
                 
                 <dd><time datetime="2020-03-11">2020-03-11</time></dd>
            
            
                <dt>reading time</dt>
                <dd>4 minutes</dd>
            
        </dl>
    </section>
    
        <div>
            <p>In the previous post I wrote about 
<a href="https://arunmozhi.in/2020/03/10/adding-d3-js-visualisations-to-vuejs-components/" target="_blank" rel="noopener">how we can add D3.js Visualizations to a Vue component</a>
. I took a plain HTML, JavaScript D3.js viz and converted it to a static visualization inside the Vue component.</p>
<p>One of the important reasons why we use a modern framework like VueJS is to build dynamic interfaces that react to user inputs. Now in this post, let us see how we can leverage that to create dynamic visualisations that react to changes in the underlying data as well.</p>
<h3 id="points-to-consider">Points to consider</h3>
<p>Before we begin let us consider these two points:</p>
<ol>
<li>VueJS components are not DOM elements, they are JS objects that are rendered into DOM elements</li>
<li>D3.JS directly works with DOM elements.</li>
</ol>
<p>So what this means is that, we can manipulate the DOM (which the user is seeing) using either Vue or D3. If the DOM elements of our visualisation is created using Vue then any changes to the underlying data would update the DOM automatically because of Vue&rsquo;s reactivity. On the other hand, if we created the DOM elements using D3, then we will have to update them with D3 as well. Let&rsquo;s try both.</p>
<h3 id="using-vue-directly">Using Vue Directly</h3>
<p>Let us take our simple inverted bar chart example.</p>
<p><img src="/img/wp-content/uploads/2020/03/simple_d3_chart.png" alt="simple_d3_chart"></p>
<p>Here the output SVG will be something like this:</p>
<p><img src="/img/wp-content/uploads/2020/03/inv_bar_dom.png" alt="inv_bar_dom"></p>
<p>We have created one rectangle per data point, with its <code>x</code> position and the <code>height</code> calculated dynamically using D3. Let us replicate the same with Vue.</p>
<p>I am going to change the <code>template</code> part of the component:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">section</span>&gt;
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">h1</span>&gt;Simple Chart&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dia&#34;</span>&gt;
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">svg</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;400&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;300&#34;</span>&gt;
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">g</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(value, index) in values&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;value&#34;</span>&gt;
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">rect</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">:x</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;index * 50&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">y</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;10&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;25&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">:height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;value * 50&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">fill</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;steelblue&#34;</span>
</span></span><span style="display:flex;"><span> &gt;&lt;/<span style="color:#f92672">rect</span>&gt;
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#f92672">g</span>&gt;
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#f92672">svg</span>&gt;
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#f92672">section</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span></code></pre></div><p>The important lines to note are the following:</p>
<ol>
<li><code>&lt;g v-for...</code> - In this line we loop through the data points with <strong>g</strong> tag acting as the container (like a div)</li>
<li><code>:x=&quot;index * 50&quot;</code> - Here we are calculating the position of the rectangle based on the index of the value</li>
<li><code>:height=&quot;value * 50&quot;</code> - Here we calculate the height of the rectangle based on the value.</li>
</ol>
<p>With this we can write our script as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;VisualComponent&#39;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">values</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now this would have created the same exact chart. If these values were ever to change by user interaction then the bar chart would update automatically. We don&rsquo;t even need D3.js at this point. This also will allow us to do cool things like binding Vue&rsquo;s event handlers (eg., <code>@click</code>) with SVG objects.</p>
<p>But here is the catch, this works for simple charts and for examples. Or real visualization will be much more complex with Lines, Curves, Axis, Legends ..etc., trying to create these things manually will be tedious. We can make it easier to a certain degree by using D3 utilities inside computed properties like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">d3</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;d3&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
</span></span><span style="display:flex;"><span> ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">computed</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">paths</span>() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">line</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">line</span>()
</span></span><span style="display:flex;"><span> .<span style="color:#a6e22e">x</span>(<span style="color:#a6e22e">d</span> =&gt; <span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span> .<span style="color:#a6e22e">y</span>(<span style="color:#a6e22e">d</span> =&gt; <span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">y</span>)
</span></span><span style="display:flex;"><span> .<span style="color:#a6e22e">curve</span>(<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">curveBasis</span>)
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">values</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">v</span> =&gt; <span style="color:#a6e22e">line</span>(<span style="color:#a6e22e">v</span>))
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>and use it like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">g</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;path in paths&#34;</span>&gt;
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">path</span> <span style="color:#a6e22e">:d</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;path&#34;</span> <span style="color:#a6e22e">stroke-width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2px&#34;</span> <span style="color:#a6e22e">stroke</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;blue</span>&gt;&lt;/<span style="color:#f92672">path</span>&gt;
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#f92672">g</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>This way we are converting the values into SVG Path definitions using D3 and also using Vue&rsquo;s reactivity to keep the paths updated according to the changes in data.</p>
<p>This improvement will also become unusable beyond a certain limit, because:</p>
<ol>
<li>We are not just thinking about the &ldquo;what I need&rdquo; of the visualization, we are also thinking about the &ldquo;how do I&rdquo; part for the &ldquo;what I need&rdquo; parts. This makes the process excessively hard. Almost negating the purpose D3.</li>
<li>This will soon become unmanageable because the binding between the data and the visual is spread between the DOM nodes inside `` and the computed properties and methods. This means any updates will need working in two places.</li>
</ol>
<p>For these reasons, I would like to keep the let everything be controlled by D3.js itself. How do I do that? 
<a href="https://arunmozhi.in/2020/03/11/employing-vuejs-reactivity-to-update-d3-js-visualisations-part-2/" target="_blank" rel="noopener">Read it here in Part 2</a>
</p>

        </div>

        
        <nav class="postNav" aria-label="Post navigation">
            
                <a class="postNav-prev postNav-button" href="/2020/03/11/employing-vuejs-reactivity-to-update-d3-js-visualisations-part-2/">
                    <span class="postNav-label"><span aria-hidden="true" class="postNav-arrow">←</span> Newer</span>
                    <span class="postNav-title">Employing VueJS reactivity to update D3.js Visualisations – Part 2</span>
                </a>
            
            
                <a class="postNav-next postNav-button" href="/2020/03/10/adding-d3-js-visualisations-to-vuejs-components/">
                    <span class="postNav-label">Older <span aria-hidden="true" class="postNav-arrow">→</span></span>
                    <span class="postNav-title">Adding D3.js Visualisations to VueJS components</span>
                </a>
            
        </nav>
        
</div>

            </main>
        </div>


        <footer class="footer">
    
        <span>
            © 2026 Arunmozhi, Built with
            <a href="https://gohugo.io" class="footerLink">Hugo</a> and
            <a href="https://github.com/LordMathis/hugo-theme-nightfall" class="footerLink">Nightfall</a> theme
        </span>
    
</footer>
    </div>

</body>

</html>
